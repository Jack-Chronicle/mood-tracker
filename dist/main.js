"use strict";var V=Object.defineProperty;var J=Object.getOwnPropertyDescriptor;var K=Object.getOwnPropertyNames;var Q=Object.prototype.hasOwnProperty;var G=(a,i)=>{for(var e in i)V(a,e,{get:i[e],enumerable:!0})},ee=(a,i,e,n)=>{if(i&&typeof i=="object"||typeof i=="function")for(let t of K(i))!Q.call(a,t)&&t!==e&&V(a,t,{get:()=>i[t],enumerable:!(n=J(i,t))||n.enumerable});return a};var te=a=>ee(V({},"__esModule",{value:!0}),a);var ne={};G(ne,{default:()=>P});module.exports=te(ne);var F=require("obsidian");var H={moodsFilePath:"moods.txt",energyDisplay:"bar",energyFormat:"Energy: {value}",barIcons:"\u28FF\u28F7\u28F6\u28E6\u28E4\u28C4\u28C0",barIconCount:7,energyOnlyFormat:"Energy: {value}",moodOnlyFormat:"{value}",moodAndEnergyFormat:"{mood} | {energy}",showMoodRibbon:!0,showEnergyRibbon:!0,showCombinedRibbon:!0};var R=require("obsidian"),x=require("obsidian");var O=class{constructor(i,e){let n=[],t=null,o=-1,s=[],p="file-path-suggester-highlight";if(!document.getElementById("file-path-suggester-style")){let d=document.createElement("style");d.id="file-path-suggester-style",d.textContent=`
        .file-path-suggester-dropdown {
          background: var(--background-secondary);
          border: 1px solid var(--background-modifier-border);
          color: var(--text-normal);
          box-shadow: 0 2px 8px var(--background-modifier-box-shadow);
          border-radius: var(--radius-m);
          font-size: var(--font-ui-medium);
          padding: 4px 0;
        }
        .file-path-suggester-dropdown div {
          padding: 4px 12px;
          cursor: pointer;
          border-radius: var(--radius-s);
        }
        .file-path-suggester-dropdown div:hover,
        .file-path-suggester-highlight {
          background: var(--background-modifier-hover);
          color: var(--text-accent);
        }
      `,document.head.appendChild(d)}function u(){t&&t.remove(),t=null,s=[],o=-1}function g(d){if(u(),!d.length)return;t=document.createElement("div"),t.className="file-path-suggester-dropdown",t.style.position="absolute",t.style.zIndex="9999",t.style.maxHeight="200px",t.style.overflowY="auto",t.style.width=i.offsetWidth+"px";let h=i.getBoundingClientRect();t.style.left=h.left+window.scrollX+"px",t.style.top=h.bottom+window.scrollY+"px",d.forEach((v,b)=>{let f=document.createElement("div");f.textContent=v,f.tabIndex=-1,f.onmouseenter=()=>r(b),f.onmouseleave=()=>r(-1),f.onmousedown=w=>{w.preventDefault(),i.value=v,i.dispatchEvent(new Event("input")),u()},t.appendChild(f),s.push(f)}),document.body.appendChild(t)}function r(d){s.forEach((h,v)=>{v===d?h.classList.add(p):h.classList.remove(p)}),o=d}i.addEventListener("input",()=>{let d=i.value.toLowerCase(),v=e.vault.getFiles().map(b=>b.path).filter(b=>b.toLowerCase().includes(d)).slice(0,20);n=v,g(v)}),i.addEventListener("keydown",d=>{!t||!s.length||(d.key==="ArrowDown"?(d.preventDefault(),r((o+1)%s.length),s[o]?.scrollIntoView({block:"nearest"})):d.key==="ArrowUp"?(d.preventDefault(),r((o-1+s.length)%s.length),s[o]?.scrollIntoView({block:"nearest"})):d.key==="Enter"?o>=0&&o<s.length&&(i.value=n[o],i.dispatchEvent(new Event("input")),u(),d.preventDefault()):d.key==="Escape"&&u())}),i.addEventListener("blur",()=>setTimeout(u,100))}};async function N(a,i){let e=["Happy","Sad","Angry","Excited","Calm","Anxious","Tired","Motivated","Bored","Grateful","Stressed","Content","Confident","Lonely","Hopeful"];try{let n=a.getAbstractFileByPath((0,R.normalizePath)(i));if(n instanceof R.TFile){let o=(await a.read(n)).split(/\r?\n/);if(o[0].trim()==="---"){let s=1;for(;s<o.length&&o[s].trim()!=="---";)s++;o=o.slice(s+1)}return o.map(s=>s.replace(/<\/?[a-zA-Z][^>]*>/g,"").trim()).filter(s=>s.length>0)}}catch(n){console.error("Failed to load moods file:",n)}return e}var L=class extends x.PluginSettingTab{constructor(i,e){super(i,e),this.plugin=e,e.settingTab=this}display(){let{containerEl:i}=this;i.empty(),i.createEl("h2",{text:"Mood & Energy Plugin Settings"}),i.createEl("h3",{text:"Mood Settings"}),new x.Setting(i).setName("Moods File Path").setDesc("Path to the file containing your moods, one per line (excluding frontmatter). Start typing to see suggestions from your vault.").addText(e=>{e.setPlaceholder("moods.txt").setValue(this.plugin.settings.moodsFilePath||"").onChange(async n=>{this.plugin.settings.moodsFilePath=n,await this.plugin.saveSettings()}),setTimeout(()=>new O(e.inputEl,this.app),0)}),i.createEl("h3",{text:"Energy Settings"}),new x.Setting(i).setName("Energy Display").setDesc("How to display the energy value: as text, percent, or a progress bar.").addDropdown(e=>e.addOption("text","Text").addOption("percent","Percent").addOption("bar","Progress Bar").setValue(this.plugin.settings.energyDisplay).onChange(async n=>{this.plugin.settings.energyDisplay=n,await this.plugin.saveSettings(),this.display()})),this.plugin.settings.energyDisplay==="bar"&&(new x.Setting(i).setName("Bar Icons").setDesc("Icons for the progress bar, from full to empty (e.g. \u28FF\u28F7\u28F6\u28E6\u28E4\u28C4\u28C0 or \u2588\u2593\u2592\u2591)").addText(e=>e.setPlaceholder("\u28FF\u28F7\u28F6\u28E6\u28E4\u28C4\u28C0").setValue(this.plugin.settings.barIcons).onChange(async n=>{this.plugin.settings.barIcons=n,await this.plugin.saveSettings()})),new x.Setting(i).setName("Bar Icon Count").setDesc("Number of icons in the progress bar (e.g. 5, 7, 10, 20)").addText(e=>e.setPlaceholder("7").setValue(this.plugin.settings.barIconCount.toString()).onChange(async n=>{let t=parseInt(n);!isNaN(t)&&t>0&&(this.plugin.settings.barIconCount=t,await this.plugin.saveSettings())}))),i.createEl("h3",{text:"Output Format Settings"}),new x.Setting(i).setName("Energy Only Output Format").setDesc("Format for energy only output. Use {value} for the energy bar/number.").addText(e=>e.setPlaceholder("Energy: {value}").setValue(this.plugin.settings.energyOnlyFormat).onChange(async n=>{this.plugin.settings.energyOnlyFormat=n,await this.plugin.saveSettings()})),new x.Setting(i).setName("Mood Only Output Format").setDesc("Format for mood only output. Use {value} for the mood.").addText(e=>e.setPlaceholder("{value}").setValue(this.plugin.settings.moodOnlyFormat).onChange(async n=>{this.plugin.settings.moodOnlyFormat=n,await this.plugin.saveSettings()})),new x.Setting(i).setName("Mood + Energy Output Format").setDesc("Format for mood + energy output. Use {mood} and {energy}.").addText(e=>e.setPlaceholder("{mood} | {energy}").setValue(this.plugin.settings.moodAndEnergyFormat).onChange(async n=>{this.plugin.settings.moodAndEnergyFormat=n,await this.plugin.saveSettings()})),new x.Setting(i).setName("Show Mood Ribbon Icon").setDesc("Show a toolbar button for the Mood menu.").addToggle(e=>e.setValue(this.plugin.settings.showMoodRibbon).onChange(async n=>{this.plugin.settings.showMoodRibbon=n,await this.plugin.saveSettings(),this.plugin.reloadRibbonIcons()})),new x.Setting(i).setName("Show Energy Ribbon Icon").setDesc("Show a toolbar button for the Energy slider.").addToggle(e=>e.setValue(this.plugin.settings.showEnergyRibbon).onChange(async n=>{this.plugin.settings.showEnergyRibbon=n,await this.plugin.saveSettings(),this.plugin.reloadRibbonIcons()})),new x.Setting(i).setName("Show Combined Ribbon Icon").setDesc("Show a toolbar button for the combined Mood & Energy modal.").addToggle(e=>e.setValue(this.plugin.settings.showCombinedRibbon).onChange(async n=>{this.plugin.settings.showCombinedRibbon=n,await this.plugin.saveSettings(),this.plugin.reloadRibbonIcons()}))}};var D=require("obsidian");var U=require("obsidian"),k=class a extends U.Modal{constructor(e,n,t){super(e);this.selectedMood=null;this.onSelect=null;this.moods=n,this.onSelect=t||null}onOpen(){if(!document.getElementById("mood-energy-bundle-css")){let r=document.createElement("link");r.id="mood-energy-bundle-css",r.rel="stylesheet",r.type="text/css",r.href="styles.css",document.head.appendChild(r)}let{contentEl:e,modalEl:n}=this;e.empty(),e.classList.add("mood-menu-modal"),e.style.margin="0",e.style.padding="0";let t=n.querySelector(".modal-header");if(t){let r=t.querySelector(".modal-title");r||(r=document.createElement("div"),r.className="modal-title",t.appendChild(r)),r.textContent="Select Mood",n.firstChild!==t&&n.insertBefore(t,n.firstChild)}else{t=document.createElement("div"),t.className="modal-header";let r=document.createElement("div");r.className="modal-title",r.textContent="Select Mood",t.appendChild(r),n.firstChild!==t&&n.insertBefore(t,n.firstChild)}let o=document.createElement("div");o.className="mood-menu-grid";let s=document.createElement("div");s.className="mood-menu-section-detail";let p=document.createElement("div");p.className="mood-menu-inline",p.style.margin="0",p.style.padding="0",this.renderInline(p,r=>{this.selectedMood=r,this.onSelect&&this.onSelect(r),this.close()},!0,o,s),e.appendChild(o),e.appendChild(s);let u=document.createElement("div");u.className="mood-menu-actions",u.style.display="flex",u.style.gap="12px",u.style.marginTop="10px";let g=document.createElement("button");g.innerText="Cancel",g.className="mod-cta cancel-btn",g.setAttribute("type","button"),g.onclick=()=>{this.onSelect&&this.onSelect(null),this.close()},u.appendChild(g),e.appendChild(u)}onClose(){this.contentEl.empty()}static parseMoodsToTree(e){let n={name:"",level:0,moods:[],sections:[]},t=n,o=[n];for(let s of e)if(/^#+\s/.test(s)){let p=s.match(/^(#+)\s*(.*)$/);if(!p)continue;let u=p[1].length,g=p[2].trim();for(;o.length>0&&o[o.length-1].level>=u;)o.pop();let r=o[o.length-1],d={name:g,level:u,moods:[],sections:[],parent:r};r.sections.push(d),o.push(d),t=d}else s.trim().length>0&&t.moods.push(s.replace(/^[-*]\s*/,""));return n}renderInline(e,n,t=!0,o,s){e.innerHTML="";let p=a.parseMoodsToTree(this.moods),u=p,g=[];o=o||document.createElement("div"),o.className="mood-menu-grid",o.style.display="grid";let r=b=>b<=4?1:b<=8?2:b<=18?3:b<=24?4:4+Math.floor((b-19)/6)+1;o.style.gap="12px",o.style.width="100%",o.style.marginBottom="0",s=s||document.createElement("div"),s.className="mood-menu-section-detail",s.style.display="none",s.style.flexDirection="column",s.style.alignItems="stretch",s.style.width="100%",s.style.marginBottom="18px";let d=null;t&&(d=document.createElement("button"),d.innerText="Back",d.className="mod-cta back-btn",d.type="button",d.tabIndex=0,d.style.outline="none",d.removeAttribute("title"),d.onclick=()=>{g.length>0&&(u=g.pop(),h(u))},s.appendChild(d));let h=b=>{if(b===p){o.style.display="grid",s.style.display="none",d&&(d.style.display="none"),o.innerHTML="";let f=[...b.sections].sort((E,M)=>E.name.localeCompare(M.name)),w=[...b.moods].sort((E,M)=>E.localeCompare(M)),y=[...f,...w],m=y.length,l=r(m);o.style.gridTemplateColumns=`repeat(${l}, 1fr)`;let S=Math.ceil(m/l),q=Array.from({length:l},()=>[]);for(let E=0;E<m;E++)q[E%l].push(y[E]);for(let E=0;E<S;E++)for(let M=0;M<l;M++){let C=q[M][E];if(C){if(typeof C=="object"&&C.name){let c=document.createElement("div");c.style.display="flex",c.style.flexDirection="column",c.style.alignItems="center",c.style.background="var(--background-modifier-hover)",c.style.borderRadius="var(--radius-m)",c.style.padding="18px 6px 18px 6px",c.style.boxSizing="border-box",c.style.minWidth="0",c.style.cursor="pointer",c.style.transition="background 0.2s",c.onmouseenter=()=>c.style.background="var(--background-modifier-active-hover)",c.onmouseleave=()=>c.style.background="var(--background-modifier-hover)";let T=document.createElement("div");T.innerText=C.name,T.style.fontWeight="bold",T.style.fontSize="1.2rem",T.style.color="var(--text-accent)",c.appendChild(T),c.onclick=()=>{g.push(b),u=C,h(C)},o.appendChild(c)}else if(typeof C=="string"){let c=document.createElement("button");c.innerText=C,c.className="mod-cta",c.setAttribute("type","button"),c.tabIndex=0,c.style.outline="none",c.removeAttribute("title"),c.style.padding="var(--size-4-2) var(--size-4-4)",c.style.borderRadius="var(--radius-s)",c.style.border="var(--input-border-width) solid var(--background-modifier-border)",c.style.background="var(--background-modifier-hover)",c.style.color="var(--text-normal)",c.style.fontSize="1rem",c.style.cursor="pointer",c.style.whiteSpace="normal",c.style.overflow="hidden",c.style.wordBreak="normal",c.style.textOverflow="ellipsis",c.style.height="auto",c.style.minHeight="48px",c.style.display="block",c.style.width="100%",c.onmouseenter=()=>c.style.background="var(--background-modifier-active-hover)",c.onmouseleave=()=>c.style.background="var(--background-modifier-hover)",c.onclick=()=>{this.selectedMood=C,Array.from(o.querySelectorAll("button")).forEach(T=>T.classList.remove("selected-mood")),c.classList.add("selected-mood"),n(C)},o.appendChild(c)}}}}else{for(o.style.display="none",s.style.display="flex",d&&(d.style.display="block");s.childNodes.length>(d?1:0);)s.removeChild(s.lastChild);let f=[...b.sections].sort((y,m)=>y.name.localeCompare(m.name)),w=[...b.moods].sort((y,m)=>y.localeCompare(m));if(f.length>0){let y=document.createElement("div");y.style.display="grid",y.style.gridTemplateColumns="repeat(auto-fit, minmax(180px, 1fr))",y.style.gap="12px",y.style.width="100%",f.forEach(m=>{let l=document.createElement("div");l.style.display="flex",l.style.flexDirection="column",l.style.alignItems="center",l.style.background="var(--background-modifier-hover)",l.style.borderRadius="var(--radius-m)",l.style.padding="14px 4px 14px 4px",l.style.boxSizing="border-box",l.style.minWidth="0",l.style.cursor="pointer",l.style.transition="background 0.2s",l.onmouseenter=()=>l.style.background="var(--background-modifier-active-hover)",l.onmouseleave=()=>l.style.background="var(--background-modifier-hover)";let S=document.createElement("div");S.innerText=m.name,S.style.fontWeight="bold",S.style.fontSize="1.1rem",S.style.color="var(--text-accent)",l.appendChild(S),l.onclick=()=>{g.push(b),u=m,h(m)},y.appendChild(l)}),s.appendChild(y)}if(f.length>0&&w.length>0){let y=document.createElement("div");y.style.width="100%",y.style.height="1px",y.style.background="var(--background-modifier-border)",y.style.margin="12px 0",s.appendChild(y)}if(w.length>0){let y=document.createElement("div");y.style.display="grid",y.style.gridTemplateColumns="repeat(auto-fit, minmax(100px, 1fr))",y.style.gap="12px",y.style.width="100%",w.forEach(m=>{let l=document.createElement("button");l.innerText=m,l.className="mod-cta",l.setAttribute("type","button"),l.tabIndex=0,l.style.outline="none",l.removeAttribute("title"),l.style.padding="var(--size-4-2) var(--size-4-4)",l.style.borderRadius="var(--radius-s)",l.style.border="var(--input-border-width) solid var(--background-modifier-border)",l.style.background="var(--background-modifier-hover)",l.style.color="var(--text-normal)",l.style.fontSize="1rem",l.style.cursor="pointer",l.style.whiteSpace="normal",l.style.overflow="hidden",l.style.wordBreak="normal",l.style.textOverflow="ellipsis",l.style.height="auto",l.style.minHeight="48px",l.style.display="block",l.style.width="100%",l.onmouseenter=()=>l.style.background="var(--background-modifier-active-hover)",l.onmouseleave=()=>l.style.background="var(--background-modifier-hover)",l.onclick=()=>{this.selectedMood=m,Array.from(y.querySelectorAll("button")).forEach(S=>S.classList.remove("selected-mood")),l.classList.add("selected-mood"),n(m)},y.appendChild(l)}),s.appendChild(y)}}};h(p),e.classList.contains("mood-menu-inline")&&(e.appendChild(o),e.appendChild(s)),e.style.margin="0",e.style.padding="0";let v=document.createElement("style");v.innerText=".selected-mood { background: var(--interactive-accent) !important; color: var(--text-on-accent) !important; border: var(--input-border-width) solid var(--background-primary) !important; }",e.appendChild(v)}};var j=null;function I(a,i,e){if(!a||a.length<2||e<1)return i.toString();let n=a.length,t=Math.max(0,Math.min(100,i)),o="";for(let s=0;s<e;s++){let p=100*(s+1)/e,u=t-100*s/e,g=Math.round((1-u/(100/e))*(n-1));t>=p?g=0:t<=100*s/e&&(g=n-1),g=Math.max(0,Math.min(n-1,g)),o+=a[g]}return o}var Y=require("obsidian"),A=class extends Y.Modal{constructor(i,e,n,t=50){super(i),this.plugin=e,this.selectedValue=t,this.onSubmit=n}onOpen(){if(!document.getElementById("mood-energy-bundle-css")){let r=document.createElement("link");r.id="mood-energy-bundle-css",r.rel="stylesheet",r.href="styles.css",document.head.appendChild(r)}let{contentEl:i}=this;i.empty(),i.classList.add("energy-slider-modal");let{modalEl:e}=this,n=e.querySelector(".modal-header");if(n){let r=n.querySelector(".modal-title");r?r.innerText="Select Energy Level":(r=document.createElement("div"),r.className="modal-title",r.innerText="Select Energy Level",n.appendChild(r))}else{n=document.createElement("div"),n.className="modal-header";let r=document.createElement("div");r.className="modal-title",r.innerText="Select Energy Level",n.appendChild(r),e.insertBefore(n,i)}this.modalEl.classList.add("energy-slider-modal"),this.modalEl.style.width="340px",this.modalEl.style.minWidth="0",this.modalEl.style.maxWidth="100vw",this.modalEl.style.boxSizing="border-box";let t=document.createElement("input");t.type="range",t.min="0",t.max="100",t.value=this.selectedValue.toString(),t.className="slider energy-slider",t.id="energy-slider",t.style.width="220px",t.removeAttribute("title"),i.appendChild(t);let o=document.createElement("div");o.className="energy-preview",o.setAttribute("aria-live","polite"),o.style.marginTop="8px",o.style.fontFamily="monospace",o.style.fontSize="1.2em",i.appendChild(o);let s=()=>{let r=this.plugin?.settings||{},d=`${this.selectedValue}`;r.energyDisplay==="percent"?d=`${this.selectedValue}%`:r.energyDisplay==="bar"&&(d=r.energyOnlyFormat?.replace("{value}",I(r.barIcons,this.selectedValue,r.barIconCount))||`${this.selectedValue}`),o.innerText=d};t.oninput=()=>{this.selectedValue=parseInt(t.value),s()},s();let p=document.createElement("div");p.className="mod-cta btn-row",p.style.display="flex",p.style.gap="12px",p.style.marginTop="18px",p.style.justifyContent="center",p.style.width="100%";let u=document.createElement("button");u.innerText="Okay",u.className="mod-cta okay-btn",u.type="button",u.tabIndex=0,u.style.outline="none",u.onclick=()=>{this.onSubmit(this.selectedValue),this.close()},u.removeAttribute("title"),p.appendChild(u);let g=document.createElement("button");g.innerText="Cancel",g.className="mod-cta cancel-btn",g.type="button",g.tabIndex=0,g.style.outline="none",g.onclick=()=>this.close(),g.removeAttribute("title"),p.appendChild(g),i.appendChild(p)}onClose(){this.contentEl.empty()}};var _=require("obsidian");var B=class extends _.Modal{constructor(e,n,t,o){super(e);this.selectedMood=null;this.selectedEnergy=50;this.plugin=n,this.moods=t,this.onSubmit=o}onOpen(){if(!document.getElementById("mood-energy-bundle-css")){let m=document.createElement("link");m.id="mood-energy-bundle-css",m.rel="stylesheet",m.href="styles.css",document.head.appendChild(m)}let{contentEl:e,modalEl:n}=this;e.empty(),e.classList.add("mood-energy-modal");let t=n.querySelector(".modal-header");if(n.style.width="unset",n.style.minWidth="unset",n.style.maxWidth="unset",t){let m=t.querySelector(".modal-title");m?m.innerText="Mood & Energy":(m=document.createElement("div"),m.className="modal-title",m.innerText="Mood & Energy",t.appendChild(m))}else{t=document.createElement("div"),t.className="modal-header";let m=document.createElement("div");m.className="modal-title",m.innerText="Mood & Energy",t.appendChild(m),n.insertBefore(t,e)}e.style.display="flex",e.style.flexDirection=window.innerWidth<600?"column":"row",e.style.alignItems="stretch",e.style.padding=window.innerWidth<600?"8px":"24px",e.style.borderRadius="var(--radius-m)",e.style.maxHeight=window.innerWidth<600?"98vh":"80vh",e.style.overflow="visible",e.style.width=window.innerWidth<600?"98vw":"min(900px, 98vw)",e.style.minWidth=window.innerWidth<600?"0":"340px",e.style.maxWidth="98vw";let o=document.createElement("div");o.style.display="flex",o.style.flexDirection=window.innerWidth<600?"column":"row",o.style.alignItems="stretch",o.style.width="100%",o.style.gap=window.innerWidth<600?"12px":"0",e.appendChild(o);let s=document.createElement("div");s.className="mood-section",s.style.flex="1 1 0",s.style.overflowY="auto",s.style.marginRight=window.innerWidth<600?"0":"32px",s.style.borderRadius="8px",s.style.display="flex",s.style.flexDirection="column",s.style.minWidth=window.innerWidth<600?"0":"260px",s.style.width=window.innerWidth<600?"100%":"",s.style.padding="12px",o.appendChild(s);let p=document.createElement("div");p.className="mood-menu-grid",p.style.padding="12px";let u=document.createElement("div");u.className="mood-menu-section-detail",u.style.padding="12px",new k(this.app,this.moods,m=>{this.selectedMood=m}).renderInline(s,m=>{this.selectedMood=m},!0,p,u),s.appendChild(p),s.appendChild(u);let r=document.createElement("div");r.className="energy-section",r.style.display="flex",r.style.flexDirection="column",r.style.alignItems="center",r.style.justifyContent="flex-start",r.style.width=window.innerWidth<600?"100%":"320px";let d=document.createElement("label");d.innerText="Energy Level",d.style.marginBottom="8px",d.style.fontWeight="bold",d.style.color="var(--text-normal)",d.setAttribute("for","energy-slider"),d.className="energy-slider-label",r.appendChild(d);let h=document.createElement("input");h.type="range",h.min="0",h.max="100",h.value=this.selectedEnergy.toString(),h.className="slider energy-slider",h.id="energy-slider",h.setAttribute("aria-label","Energy Level"),h.style.width="220px",r.appendChild(h);let v=document.createElement("div");v.className="energy-preview",v.style.marginTop="8px",v.style.fontFamily="monospace",v.style.fontSize="1.2em",v.setAttribute("aria-live","polite"),r.appendChild(v);let b=()=>{let m=this.plugin?.settings||{},l=`${this.selectedEnergy}`;m.energyDisplay==="percent"?l=`${this.selectedEnergy}%`:m.energyDisplay==="bar"&&(l=m.energyOnlyFormat?.replace("{value}",I(m.barIcons,this.selectedEnergy,m.barIconCount))||`${this.selectedEnergy}`),v.innerText=l};h.oninput=()=>{this.selectedEnergy=parseInt(h.value),b()},b();let f=document.createElement("div");f.style.display="flex",f.style.gap="12px",f.style.marginTop="18px",f.style.justifyContent="center",f.style.width="100%";let w=document.createElement("button");w.innerText="Okay",w.className="mod-cta okay-btn",w.type="button",w.tabIndex=0,w.style.outline="none",w.removeAttribute("title"),w.onclick=()=>{let m=this.selectedMood??"";this.selectedEnergy!==null&&this.onSubmit(m,this.selectedEnergy),this.close()},f.appendChild(w);let y=document.createElement("button");y.innerText="Cancel",y.className="mod-cta cancel-btn",y.type="button",y.tabIndex=0,y.style.outline="none",y.removeAttribute("title"),y.onclick=()=>this.close(),f.appendChild(y),r.appendChild(f),o.appendChild(r)}onClose(){this.contentEl.empty()}};async function X(a,i){let e=await N(a.app.vault,a.settings.moodsFilePath);if(i){new B(a.app,a,e,i).open();return}return new Promise(n=>{new B(a.app,a,e,()=>n()).open()})}async function W(a){let i=await N(a.app.vault,a.settings.moodsFilePath);return new Promise(e=>{new k(a.app,i,t=>{if(t!=null){let o=a.app.workspace.getActiveViewOfType(D.MarkdownView)?.editor;if(o){let p=(a.settings.moodOnlyFormat||"{value}").replace("{value}",t);o.focus(),o.replaceSelection(p)}}e()}).open()})}async function z(a){return new Promise(i=>{new A(a.app,a,n=>{if(n!=null){let t=a.app.workspace.getActiveViewOfType(D.MarkdownView)?.editor;if(t){let o="",s=a.settings;s.energyDisplay==="percent"?o=s.energyOnlyFormat.replace("{value}",`${n}%`):s.energyDisplay==="bar"?o=s.energyOnlyFormat.replace("{value}",I(s.barIcons,n,s.barIconCount)):o=s.energyOnlyFormat.replace("{value}",`${n}`),t.focus(),t.replaceSelection(o)}}i()}).open()})}async function $(a){await X(a,(i,e)=>{let n=a.app.workspace.getActiveViewOfType(D.MarkdownView)?.editor;if(n){let t=a.settings,o=`${e}`;t.energyDisplay==="percent"?o=`${e}%`:t.energyDisplay==="bar"?o=t.energyOnlyFormat.replace("{value}",I(t.barIcons,e,t.barIconCount)):o=t.energyOnlyFormat.replace("{value}",`${e}`);let s=(t.moodOnlyFormat||"{value}").replace("{value}",i||"").trim(),p=(t.moodAndEnergyFormat||"{mood} | {energy}").replace("{mood}",s).replace("{energy}",o.trim());n.focus(),n.replaceSelection(p)}})}function Z(a){function i(){return!j}a.addCommand({id:"insert-mood",name:"Insert Mood",callback:async()=>{i()&&await W(a)}}),a.addCommand({id:"insert-energy-level",name:"Insert Energy Level",callback:async()=>{i()&&await z(a)}}),a.addCommand({id:"insert-mood-and-energy",name:"Insert Mood and Energy Level",callback:async()=>{i()&&await $(a)}})}var P=class extends F.Plugin{constructor(e,n){super(e,n);this.settingTab=null;this.ribbonIcons=[];this.settings=H}reloadRibbonIcons(){this.ribbonIcons.forEach(n=>n.remove()),this.ribbonIcons=[];let e=()=>{document.querySelectorAll(".modal-container").forEach(t=>{let o=t.querySelector(".modal-close-button");o instanceof HTMLElement&&o.click()})};if(this.settings.showMoodRibbon){let n=this.addRibbonIcon("smile","Open Mood Menu",async()=>{e();let t=this.app.workspace.getActiveViewOfType(F.MarkdownView)?.editor;t&&t.focus(),await W(this)});this.ribbonIcons.push(n)}if(this.settings.showEnergyRibbon){let n=this.addRibbonIcon("activity","Open Energy Slider",async()=>{e();let t=this.app.workspace.getActiveViewOfType(F.MarkdownView)?.editor;t&&t.focus(),await z(this)});this.ribbonIcons.push(n)}if(this.settings.showCombinedRibbon){let n=this.addRibbonIcon("bar-chart-2","Open Mood & Energy Modal",async()=>{e();let t=this.app.workspace.getActiveViewOfType(F.MarkdownView)?.editor;t&&t.focus(),await $(this)});this.ribbonIcons.push(n)}}async onload(){this.settings=Object.assign({},H,await this.loadData?.()),await this.saveSettings(),this.addSettingTab(new L(this.app,this)),Z(this),await this.reloadRibbonIcons()}async saveSettings(){await this.saveData?.(this.settings)}onunload(){this.ribbonIcons.forEach(e=>e.remove()),this.ribbonIcons=[]}};
//# sourceMappingURL=main.js.map
