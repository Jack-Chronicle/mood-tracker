"use strict";var H=Object.defineProperty;var J=Object.getOwnPropertyDescriptor;var K=Object.getOwnPropertyNames;var Q=Object.prototype.hasOwnProperty;var G=(l,r)=>{for(var t in r)H(l,t,{get:r[t],enumerable:!0})},ee=(l,r,t,o)=>{if(r&&typeof r=="object"||typeof r=="function")for(let e of K(r))!Q.call(l,e)&&e!==t&&H(l,e,{get:()=>r[e],enumerable:!(o=J(r,e))||o.enumerable});return l};var te=l=>ee(H({},"__esModule",{value:!0}),l);var oe={};G(oe,{default:()=>V});module.exports=te(oe);var N=require("obsidian");var z={moodsFilePath:"moods.txt",energyDisplay:"bar",energyFormat:"Energy: {value}",barIcons:"\u28FF\u28F7\u28F6\u28E6\u28E4\u28C4\u28C0",barIconCount:7,energyOnlyFormat:"Energy: {value}",moodOnlyFormat:"{value}",moodAndEnergyFormat:"{mood} | {energy}",showMoodRibbon:!0,showEnergyRibbon:!0,showCombinedRibbon:!0};var B=require("obsidian"),C=require("obsidian");var L=class{constructor(r,t){let o=[],e=null,n=-1,s=[],m="file-path-suggester-highlight";if(!document.getElementById("file-path-suggester-style")){let a=document.createElement("style");a.id="file-path-suggester-style",a.textContent=`
        .file-path-suggester-dropdown {
          background: var(--background-secondary);
          border: 1px solid var(--background-modifier-border);
          color: var(--text-normal);
          box-shadow: 0 2px 8px var(--background-modifier-box-shadow);
          border-radius: var(--radius-m);
          font-size: var(--font-ui-medium);
          padding: 4px 0;
        }
        .file-path-suggester-dropdown div {
          padding: 4px 12px;
          cursor: pointer;
          border-radius: var(--radius-s);
        }
        .file-path-suggester-dropdown div:hover,
        .file-path-suggester-highlight {
          background: var(--background-modifier-hover);
          color: var(--text-accent);
        }
      `,document.head.appendChild(a)}function p(){e&&e.remove(),e=null,s=[],n=-1}function g(a){if(p(),!a.length)return;e=document.createElement("div"),e.className="file-path-suggester-dropdown",e.style.position="absolute",e.style.zIndex="9999",e.style.maxHeight="200px",e.style.overflowY="auto",e.style.width=r.offsetWidth+"px";let b=r.getBoundingClientRect();e.style.left=b.left+window.scrollX+"px",e.style.top=b.bottom+window.scrollY+"px",a.forEach((x,f)=>{let v=document.createElement("div");v.textContent=x,v.tabIndex=-1,v.onmouseenter=()=>i(f),v.onmouseleave=()=>i(-1),v.onmousedown=w=>{w.preventDefault(),r.value=x,r.dispatchEvent(new Event("input")),p()},e.appendChild(v),s.push(v)}),document.body.appendChild(e)}function i(a){s.forEach((b,x)=>{x===a?b.classList.add(m):b.classList.remove(m)}),n=a}r.addEventListener("input",()=>{let a=r.value.toLowerCase(),x=t.vault.getFiles().map(f=>f.path).filter(f=>f.toLowerCase().includes(a)).slice(0,20);o=x,g(x)}),r.addEventListener("keydown",a=>{!e||!s.length||(a.key==="ArrowDown"?(a.preventDefault(),i((n+1)%s.length),s[n]?.scrollIntoView({block:"nearest"})):a.key==="ArrowUp"?(a.preventDefault(),i((n-1+s.length)%s.length),s[n]?.scrollIntoView({block:"nearest"})):a.key==="Enter"?n>=0&&n<s.length&&(r.value=o[n],r.dispatchEvent(new Event("input")),p(),a.preventDefault()):a.key==="Escape"&&p())}),r.addEventListener("blur",()=>setTimeout(p,100))}};async function A(l,r){let t=["Happy","Sad","Angry","Excited","Calm","Anxious","Tired","Motivated","Bored","Grateful","Stressed","Content","Confident","Lonely","Hopeful"];try{let o=l.getAbstractFileByPath((0,B.normalizePath)(r));if(o instanceof B.TFile){let n=(await l.read(o)).split(/\r?\n/);if(n[0].trim()==="---"){let s=1;for(;s<n.length&&n[s].trim()!=="---";)s++;n=n.slice(s+1)}return n.map(s=>s.replace(/<\/?[a-zA-Z][^>]*>/g,"").trim()).filter(s=>s.length>0)}}catch(o){console.error("Failed to load moods file:",o)}return t}var R=class extends C.PluginSettingTab{constructor(r,t){super(r,t),this.plugin=t,t.settingTab=this}display(){let{containerEl:r}=this;r.empty(),r.createEl("h2",{text:"Mood & Energy Plugin Settings"}),r.createEl("h3",{text:"Mood Settings"}),new C.Setting(r).setName("Moods File Path").setDesc("Path to the file containing your moods, one per line (excluding frontmatter). Start typing to see suggestions from your vault.").addText(t=>{t.setPlaceholder("moods.txt").setValue(this.plugin.settings.moodsFilePath||"").onChange(async o=>{this.plugin.settings.moodsFilePath=o,await this.plugin.saveSettings()}),setTimeout(()=>new L(t.inputEl,this.app),0)}),r.createEl("h3",{text:"Energy Settings"}),new C.Setting(r).setName("Energy Display").setDesc("How to display the energy value: as text, percent, or a progress bar.").addDropdown(t=>t.addOption("text","Text").addOption("percent","Percent").addOption("bar","Progress Bar").setValue(this.plugin.settings.energyDisplay).onChange(async o=>{this.plugin.settings.energyDisplay=o,await this.plugin.saveSettings(),this.display()})),this.plugin.settings.energyDisplay==="bar"&&(new C.Setting(r).setName("Bar Icons").setDesc("Icons for the progress bar, from full to empty (e.g. \u28FF\u28F7\u28F6\u28E6\u28E4\u28C4\u28C0 or \u2588\u2593\u2592\u2591)").addText(t=>t.setPlaceholder("\u28FF\u28F7\u28F6\u28E6\u28E4\u28C4\u28C0").setValue(this.plugin.settings.barIcons).onChange(async o=>{this.plugin.settings.barIcons=o,await this.plugin.saveSettings()})),new C.Setting(r).setName("Bar Icon Count").setDesc("Number of icons in the progress bar (e.g. 5, 7, 10, 20)").addText(t=>t.setPlaceholder("7").setValue(this.plugin.settings.barIconCount.toString()).onChange(async o=>{let e=parseInt(o);!isNaN(e)&&e>0&&(this.plugin.settings.barIconCount=e,await this.plugin.saveSettings())}))),r.createEl("h3",{text:"Output Format Settings"}),new C.Setting(r).setName("Energy Only Output Format").setDesc("Format for energy only output. Use {value} for the energy bar/number.").addText(t=>t.setPlaceholder("Energy: {value}").setValue(this.plugin.settings.energyOnlyFormat).onChange(async o=>{this.plugin.settings.energyOnlyFormat=o,await this.plugin.saveSettings()})),new C.Setting(r).setName("Mood Only Output Format").setDesc("Format for mood only output. Use {value} for the mood.").addText(t=>t.setPlaceholder("{value}").setValue(this.plugin.settings.moodOnlyFormat).onChange(async o=>{this.plugin.settings.moodOnlyFormat=o,await this.plugin.saveSettings()})),new C.Setting(r).setName("Mood + Energy Output Format").setDesc("Format for mood + energy output. Use {mood} and {energy}.").addText(t=>t.setPlaceholder("{mood} | {energy}").setValue(this.plugin.settings.moodAndEnergyFormat).onChange(async o=>{this.plugin.settings.moodAndEnergyFormat=o,await this.plugin.saveSettings()})),new C.Setting(r).setName("Show Mood Ribbon Icon").setDesc("Show a toolbar button for the Mood menu.").addToggle(t=>t.setValue(this.plugin.settings.showMoodRibbon).onChange(async o=>{this.plugin.settings.showMoodRibbon=o,await this.plugin.saveSettings(),this.plugin.reloadRibbonIcons()})),new C.Setting(r).setName("Show Energy Ribbon Icon").setDesc("Show a toolbar button for the Energy slider.").addToggle(t=>t.setValue(this.plugin.settings.showEnergyRibbon).onChange(async o=>{this.plugin.settings.showEnergyRibbon=o,await this.plugin.saveSettings(),this.plugin.reloadRibbonIcons()})),new C.Setting(r).setName("Show Combined Ribbon Icon").setDesc("Show a toolbar button for the combined Mood & Energy modal.").addToggle(t=>t.setValue(this.plugin.settings.showCombinedRibbon).onChange(async o=>{this.plugin.settings.showCombinedRibbon=o,await this.plugin.saveSettings(),this.plugin.reloadRibbonIcons()}))}};var P=require("obsidian");var U=require("obsidian"),I=class l extends U.Modal{constructor(t,o,e){super(t);this.selectedMood=null;this.onSelect=null;this.moods=o,this.onSelect=e||null}onOpen(){if(!document.getElementById("mood-energy-bundle-css")){let i=document.createElement("link");i.id="mood-energy-bundle-css",i.rel="stylesheet",i.type="text/css",i.href="styles.css",document.head.appendChild(i)}let{contentEl:t}=this;t.empty(),t.classList.add("mood-menu-modal");let{modalEl:o}=this,e=o.querySelector(".modal-header");if(e){let i=e.querySelector(".modal-title");i?i.textContent="Select Mood":(i=document.createElement("div"),i.className="modal-title",i.textContent="Select Mood",e.appendChild(i))}else{e=document.createElement("div"),e.className="modal-header";let i=document.createElement("div");i.className="modal-title",i.textContent="Select Mood",e.appendChild(i),o.insertBefore(e,t)}this.modalEl.classList.add("mood-menu-modal"),this.modalEl.style.width="fit-content",this.modalEl.style.margin="0",this.modalEl.style.padding="0px 50px 0px 50px";let n=document.createElement("div");n.className="mood-menu-grid";let s=document.createElement("div");s.className="mood-menu-section-detail";let m=document.createElement("div");m.className="mood-menu-inline",m.style.margin="0",m.style.padding="0",this.renderInline(m,i=>{this.selectedMood=i,this.onSelect&&this.onSelect(i),this.close()},!0,n,s),t.appendChild(n),t.appendChild(s);let p=document.createElement("div");p.className="mood-menu-actions",p.style.display="flex",p.style.gap="12px",p.style.marginTop="10px";let g=document.createElement("button");g.innerText="Cancel",g.className="mod-cta cancel-btn",g.setAttribute("type","button"),g.onclick=()=>{this.onSelect&&this.onSelect(null),this.close()},p.appendChild(g),t.appendChild(p)}onClose(){this.contentEl.empty()}static parseMoodsToTree(t){let o={name:"",level:0,moods:[],sections:[]},e=o,n=[o];for(let s of t)if(/^#+\s/.test(s)){let m=s.match(/^(#+)\s*(.*)$/);if(!m)continue;let p=m[1].length,g=m[2].trim();for(;n.length>0&&n[n.length-1].level>=p;)n.pop();let i=n[n.length-1],a={name:g,level:p,moods:[],sections:[],parent:i};i.sections.push(a),n.push(a),e=a}else s.trim().length>0&&e.moods.push(s.replace(/^[-*]\s*/,""));return o}renderInline(t,o,e=!0,n,s){t.innerHTML="";let m=l.parseMoodsToTree(this.moods),p=m,g=[];n=n||document.createElement("div"),n.className="mood-menu-grid",n.style.display="grid";let i=f=>f<=4?1:f<=8?2:f<=18?3:f<=24?4:4+Math.floor((f-19)/6)+1;n.style.gap="12px",n.style.width="100%",n.style.marginBottom="0",s=s||document.createElement("div"),s.className="mood-menu-section-detail",s.style.display="none",s.style.flexDirection="column",s.style.alignItems="stretch",s.style.width="100%",s.style.marginBottom="18px";let a=null;e&&(a=document.createElement("button"),a.innerText="Back",a.className="mod-cta back-btn",a.type="button",a.tabIndex=0,a.style.outline="none",a.removeAttribute("title"),a.onclick=()=>{g.length>0&&(p=g.pop(),b(p))},s.appendChild(a));let b=f=>{if(f===m){n.style.display="grid",s.style.display="none",a&&(a.style.display="none"),n.innerHTML="";let v=[...f.sections].sort((E,k)=>E.name.localeCompare(k.name)),w=[...f.moods].sort((E,k)=>E.localeCompare(k)),u=[...v,...w],c=u.length,h=i(c);n.style.gridTemplateColumns=`repeat(${h}, 1fr)`;let S=Math.ceil(c/h),y=Array.from({length:h},()=>[]);for(let E=0;E<c;E++)y[E%h].push(u[E]);for(let E=0;E<S;E++)for(let k=0;k<h;k++){let M=y[k][E];if(M){if(typeof M=="object"&&M.name){let d=document.createElement("div");d.style.display="flex",d.style.flexDirection="column",d.style.alignItems="center",d.style.background="var(--background-modifier-hover)",d.style.borderRadius="var(--radius-m)",d.style.padding="18px 6px 18px 6px",d.style.boxSizing="border-box",d.style.minWidth="0",d.style.cursor="pointer",d.style.transition="background 0.2s",d.onmouseenter=()=>d.style.background="var(--background-modifier-active-hover)",d.onmouseleave=()=>d.style.background="var(--background-modifier-hover)";let T=document.createElement("div");T.innerText=M.name,T.style.fontWeight="bold",T.style.fontSize="1.2rem",T.style.color="var(--text-accent)",d.appendChild(T),d.onclick=()=>{g.push(f),p=M,b(M)},n.appendChild(d)}else if(typeof M=="string"){let d=document.createElement("button");d.innerText=M,d.className="mod-cta",d.setAttribute("type","button"),d.tabIndex=0,d.style.outline="none",d.removeAttribute("title"),d.style.padding="var(--size-4-2) var(--size-4-4)",d.style.borderRadius="var(--radius-s)",d.style.border="var(--input-border-width) solid var(--background-modifier-border)",d.style.background="var(--background-modifier-hover)",d.style.color="var(--text-normal)",d.style.fontSize="1rem",d.style.cursor="pointer",d.style.whiteSpace="normal",d.style.overflow="hidden",d.style.wordBreak="normal",d.style.textOverflow="ellipsis",d.style.height="auto",d.style.minHeight="48px",d.style.display="block",d.style.width="100%",d.onmouseenter=()=>d.style.background="var(--background-modifier-active-hover)",d.onmouseleave=()=>d.style.background="var(--background-modifier-hover)",d.onclick=()=>{this.selectedMood=M,Array.from(n.querySelectorAll("button")).forEach(T=>T.classList.remove("selected-mood")),d.classList.add("selected-mood"),o(M)},n.appendChild(d)}}}}else{for(n.style.display="none",s.style.display="flex",a&&(a.style.display="block");s.childNodes.length>(a?1:0);)s.removeChild(s.lastChild);let v=[...f.sections].sort((u,c)=>u.name.localeCompare(c.name)),w=[...f.moods].sort((u,c)=>u.localeCompare(c));if(v.length>0){let u=document.createElement("div");u.style.display="grid",u.style.gridTemplateColumns="repeat(auto-fit, minmax(180px, 1fr))",u.style.gap="12px",u.style.width="100%",v.forEach(c=>{let h=document.createElement("div");h.style.display="flex",h.style.flexDirection="column",h.style.alignItems="center",h.style.background="var(--background-modifier-hover)",h.style.borderRadius="var(--radius-m)",h.style.padding="14px 4px 14px 4px",h.style.boxSizing="border-box",h.style.minWidth="0",h.style.cursor="pointer",h.style.transition="background 0.2s",h.onmouseenter=()=>h.style.background="var(--background-modifier-active-hover)",h.onmouseleave=()=>h.style.background="var(--background-modifier-hover)";let S=document.createElement("div");S.innerText=c.name,S.style.fontWeight="bold",S.style.fontSize="1.1rem",S.style.color="var(--text-accent)",h.appendChild(S),h.onclick=()=>{g.push(f),p=c,b(c)},u.appendChild(h)}),s.appendChild(u)}if(v.length>0&&w.length>0){let u=document.createElement("div");u.style.width="100%",u.style.height="1px",u.style.background="var(--background-modifier-border)",u.style.margin="12px 0",s.appendChild(u)}if(w.length>0){let u=document.createElement("div");u.style.display="grid";let c=w.length,h=i(c);u.style.gridTemplateColumns=`repeat(${h}, 1fr)`,u.style.gap="12px",u.style.width="100%",w.forEach(S=>{let y=document.createElement("button");y.innerText=S,y.className="mod-cta",y.setAttribute("type","button"),y.tabIndex=0,y.style.outline="none",y.removeAttribute("title"),y.style.padding="var(--size-4-2) var(--size-4-4)",y.style.borderRadius="var(--radius-s)",y.style.border="var(--input-border-width) solid var(--background-modifier-border)",y.style.background="var(--background-modifier-hover)",y.style.color="var(--text-normal)",y.style.fontSize="1rem",y.style.cursor="pointer",y.style.whiteSpace="normal",y.style.overflow="hidden",y.style.wordBreak="normal",y.style.textOverflow="ellipsis",y.style.height="auto",y.style.minHeight="48px",y.style.display="block",y.style.width="100%",y.onmouseenter=()=>y.style.background="var(--background-modifier-active-hover)",y.onmouseleave=()=>y.style.background="var(--background-modifier-hover)",y.onclick=()=>{this.selectedMood=S,Array.from(u.querySelectorAll("button")).forEach(E=>E.classList.remove("selected-mood")),y.classList.add("selected-mood"),o(S)},u.appendChild(y)}),s.appendChild(u)}}};b(m),t.classList.contains("mood-menu-inline")&&(t.appendChild(n),t.appendChild(s)),t.style.margin="0",t.style.padding="0";let x=document.createElement("style");x.innerText=".selected-mood { background: var(--interactive-accent) !important; color: var(--text-on-accent) !important; border: var(--input-border-width) solid var(--background-primary) !important; }",t.appendChild(x)}};var j=null;function F(l,r,t){if(!l||l.length<2||t<1)return r.toString();let o=l.length,e=Math.max(0,Math.min(100,r)),n="";for(let s=0;s<t;s++){let m=100*(s+1)/t,p=e-100*s/t,g=Math.round((1-p/(100/t))*(o-1));e>=m?g=0:e<=100*s/t&&(g=o-1),g=Math.max(0,Math.min(o-1,g)),n+=l[g]}return n}var Y=require("obsidian"),O=class extends Y.Modal{constructor(r,t,o,e=50){super(r),this.plugin=t,this.selectedValue=e,this.onSubmit=o}onOpen(){if(!document.getElementById("mood-energy-bundle-css")){let i=document.createElement("link");i.id="mood-energy-bundle-css",i.rel="stylesheet",i.type="text/css",i.href="styles.css",document.head.appendChild(i)}let{contentEl:r}=this;r.empty(),r.classList.add("energy-slider-modal");let{modalEl:t}=this,o=t.querySelector(".modal-header");if(o){let i=o.querySelector(".modal-title");i?i.textContent="Select Energy Level":(i=document.createElement("div"),i.className="modal-title",i.textContent="Select Energy Level",o.appendChild(i))}else{o=document.createElement("div"),o.className="modal-header";let i=document.createElement("div");i.className="modal-title",i.textContent="Select Energy Level",o.appendChild(i),t.insertBefore(o,r)}this.modalEl.classList.add("energy-slider-modal"),this.modalEl.style.width="340px",this.modalEl.style.minWidth="0",this.modalEl.style.maxWidth="100vw",this.modalEl.style.boxSizing="border-box";let e=document.createElement("input");e.type="range",e.min="0",e.max="100",e.value=this.selectedValue.toString(),e.className="slider energy-slider",e.id="energy-slider",e.style.width="220px",e.removeAttribute("title"),r.appendChild(e);let n=document.createElement("div");n.className="energy-preview",n.setAttribute("aria-live","polite"),n.style.marginTop="8px",n.style.fontFamily="monospace",n.style.fontSize="1.2em",r.appendChild(n);let s=()=>{let i=this.plugin?.settings||{},a=`${this.selectedValue}`;i.energyDisplay==="percent"?a=`${this.selectedValue}%`:i.energyDisplay==="bar"&&(a=i.energyOnlyFormat?.replace("{value}",F(i.barIcons,this.selectedValue,i.barIconCount))||`${this.selectedValue}`),n.innerText=a};e.oninput=()=>{this.selectedValue=parseInt(e.value),s()},s();let m=document.createElement("div");m.className="mod-cta btn-row",m.style.display="flex",m.style.gap="12px",m.style.marginTop="18px",m.style.justifyContent="center",m.style.width="100%";let p=document.createElement("button");p.innerText="Okay",p.className="mod-cta okay-btn",p.type="button",p.tabIndex=0,p.style.outline="none",p.onclick=()=>{this.onSubmit(this.selectedValue),this.close()},p.removeAttribute("title"),m.appendChild(p);let g=document.createElement("button");g.innerText="Cancel",g.className="mod-cta cancel-btn",g.type="button",g.tabIndex=0,g.style.outline="none",g.onclick=()=>this.close(),g.removeAttribute("title"),m.appendChild(g),r.appendChild(m)}onClose(){this.contentEl.empty()}};var _=require("obsidian");var D=class extends _.Modal{constructor(t,o,e,n){super(t);this.selectedMood=null;this.selectedEnergy=50;this.plugin=o,this.moods=e,this.onSubmit=n}onOpen(){if(!document.getElementById("mood-energy-bundle-css")){let c=document.createElement("link");c.id="mood-energy-bundle-css",c.rel="stylesheet",c.type="text/css",c.href="styles.css",document.head.appendChild(c)}let{contentEl:t,modalEl:o}=this;t.empty();let e=o.querySelector(".modal-header");if(e){let c=e.querySelector(".modal-title");c?c.textContent="Mood & Energy":(c=document.createElement("div"),c.className="modal-title",c.textContent="Mood & Energy",e.appendChild(c))}else{e=document.createElement("div"),e.className="modal-header";let c=document.createElement("div");c.className="modal-title",c.textContent="Mood & Energy",e.appendChild(c),o.insertBefore(e,t)}this.modalEl.classList.add("mood-energy-modal"),t.classList.remove("mood-energy-modal"),t.style.display="flex",t.style.flexDirection=window.innerWidth<600?"column":"row",t.style.alignItems="stretch",t.style.borderRadius="var(--radius-m)",t.style.overflow="visible",t.style.maxWidth="98vw";let n=document.createElement("div");n.style.display="flex",n.style.flexDirection=window.innerWidth<600?"column":"row",n.style.alignItems="stretch",n.style.width="100%",n.style.gap=window.innerWidth<600?"12px":"0",t.appendChild(n);let s=document.createElement("div");s.className="mood-section",s.style.flex="1 1 0",s.style.overflowY="auto",s.style.marginRight=window.innerWidth<600?"0":"32px",s.style.borderRadius="8px",s.style.display="flex",s.style.flexDirection="column",s.style.minWidth=window.innerWidth<600?"0":"260px",s.style.width=window.innerWidth<600?"100%":"",s.style.padding="12px",n.appendChild(s);let m=document.createElement("div");m.className="mood-menu-grid",m.style.padding="12px";let p=document.createElement("div");p.className="mood-menu-section-detail",p.style.padding="12px",new I(this.app,this.moods,c=>{this.selectedMood=c}).renderInline(s,c=>{this.selectedMood=c},!0,m,p),s.appendChild(m),s.appendChild(p);let i=document.createElement("div");i.className="energy-section",i.style.display="flex",i.style.flexDirection="column",i.style.alignItems="center",i.style.justifyContent="flex-start",i.style.width=window.innerWidth<600?"100%":"320px";let a=document.createElement("label");a.innerText="Energy Level",a.style.marginBottom="8px",a.style.fontWeight="bold",a.style.color="var(--text-normal)",a.setAttribute("for","energy-slider"),a.className="energy-slider-label",i.appendChild(a);let b=document.createElement("input");b.type="range",b.min="0",b.max="100",b.value=this.selectedEnergy.toString(),b.className="slider energy-slider",b.id="energy-slider",b.setAttribute("aria-label","Energy Level"),b.style.width="220px",i.appendChild(b);let x=document.createElement("div");x.className="energy-preview",x.style.marginTop="8px",x.style.fontFamily="monospace",x.style.fontSize="1.2em",x.setAttribute("aria-live","polite"),i.appendChild(x);let f=()=>{let c=this.plugin?.settings||{},h=`${this.selectedEnergy}`;c.energyDisplay==="percent"?h=`${this.selectedEnergy}%`:c.energyDisplay==="bar"&&(h=c.energyOnlyFormat?.replace("{value}",F(c.barIcons,this.selectedEnergy,c.barIconCount))||`${this.selectedEnergy}`),x.innerText=h};b.oninput=()=>{this.selectedEnergy=parseInt(b.value),f()},f();let v=document.createElement("div");v.style.display="flex",v.style.gap="12px",v.style.marginTop="18px",v.style.justifyContent="center",v.style.width="100%";let w=document.createElement("button");w.innerText="Okay",w.className="mod-cta okay-btn",w.type="button",w.tabIndex=0,w.style.outline="none",w.removeAttribute("title"),w.onclick=()=>{let c=this.selectedMood??"";this.selectedEnergy!==null&&this.onSubmit(c,this.selectedEnergy),this.close()},v.appendChild(w);let u=document.createElement("button");u.innerText="Cancel",u.className="mod-cta cancel-btn",u.type="button",u.tabIndex=0,u.style.outline="none",u.removeAttribute("title"),u.onclick=()=>this.close(),v.appendChild(u),i.appendChild(v),n.appendChild(i)}onClose(){this.contentEl.empty()}};async function X(l,r){let t=await A(l.app.vault,l.settings.moodsFilePath);if(r){new D(l.app,l,t,r).open();return}return new Promise(o=>{new D(l.app,l,t,()=>o()).open()})}async function W(l){let r=await A(l.app.vault,l.settings.moodsFilePath);return new Promise(t=>{new I(l.app,r,e=>{if(e!=null){let n=l.app.workspace.getActiveViewOfType(P.MarkdownView)?.editor;if(n){let m=(l.settings.moodOnlyFormat||"{value}").replace("{value}",e);n.focus(),n.replaceSelection(m)}}t()}).open()})}async function $(l){return new Promise(r=>{new O(l.app,l,o=>{if(o!=null){let e=l.app.workspace.getActiveViewOfType(P.MarkdownView)?.editor;if(e){let n="",s=l.settings;s.energyDisplay==="percent"?n=s.energyOnlyFormat.replace("{value}",`${o}%`):s.energyDisplay==="bar"?n=s.energyOnlyFormat.replace("{value}",F(s.barIcons,o,s.barIconCount)):n=s.energyOnlyFormat.replace("{value}",`${o}`),e.focus(),e.replaceSelection(n)}}r()}).open()})}async function q(l){await X(l,(r,t)=>{let o=l.app.workspace.getActiveViewOfType(P.MarkdownView)?.editor;if(o){let e=l.settings,n=`${t}`;e.energyDisplay==="percent"?n=`${t}%`:e.energyDisplay==="bar"?n=e.energyOnlyFormat.replace("{value}",F(e.barIcons,t,e.barIconCount)):n=e.energyOnlyFormat.replace("{value}",`${t}`);let s=(e.moodOnlyFormat||"{value}").replace("{value}",r||"").trim(),m=(e.moodAndEnergyFormat||"{mood} | {energy}").replace("{mood}",s).replace("{energy}",n.trim());o.focus(),o.replaceSelection(m)}})}function Z(l){function r(){return!j}l.addCommand({id:"insert-mood",name:"Insert Mood",callback:async()=>{r()&&await W(l)}}),l.addCommand({id:"insert-energy-level",name:"Insert Energy Level",callback:async()=>{r()&&await $(l)}}),l.addCommand({id:"insert-mood-and-energy",name:"Insert Mood and Energy Level",callback:async()=>{r()&&await q(l)}})}var V=class extends N.Plugin{constructor(t,o){super(t,o);this.settingTab=null;this.ribbonIcons=[];this.settings=z}reloadRibbonIcons(){this.ribbonIcons.forEach(o=>o.remove()),this.ribbonIcons=[];let t=()=>{document.querySelectorAll(".modal-container").forEach(e=>{let n=e.querySelector(".modal-close-button");n instanceof HTMLElement&&n.click()})};if(this.settings.showMoodRibbon){let o=this.addRibbonIcon("smile","Open Mood Menu",async()=>{t();let e=this.app.workspace.getActiveViewOfType(N.MarkdownView)?.editor;e&&e.focus(),await W(this)});this.ribbonIcons.push(o)}if(this.settings.showEnergyRibbon){let o=this.addRibbonIcon("activity","Open Energy Slider",async()=>{t();let e=this.app.workspace.getActiveViewOfType(N.MarkdownView)?.editor;e&&e.focus(),await $(this)});this.ribbonIcons.push(o)}if(this.settings.showCombinedRibbon){let o=this.addRibbonIcon("bar-chart-2","Open Mood & Energy Modal",async()=>{t();let e=this.app.workspace.getActiveViewOfType(N.MarkdownView)?.editor;e&&e.focus(),await q(this)});this.ribbonIcons.push(o)}}async onload(){this.settings=Object.assign({},z,await this.loadData?.()),await this.saveSettings(),this.addSettingTab(new R(this.app,this)),Z(this),await this.reloadRibbonIcons()}async saveSettings(){await this.saveData?.(this.settings)}onunload(){this.ribbonIcons.forEach(t=>t.remove()),this.ribbonIcons=[]}};
//# sourceMappingURL=main.js.map
